* Tasks [2/19]
*** WAITING Setup Apple Developer account

[2023-02-16 Thu 14:34]
Sent email back to Melissa. Trying to just change the name.


*** IN_PROGRESS Architect Captee

#+BEGIN_SRC plantuml :file images/captee-architecture.svg
  !pragma teoz true
  participant "User" as user
  participant "Share Action Sheet" as shareSheet  
  participant "Safari" as safari
  box Captee
      participant "ShareViewController" as shareVC
      participant "Share2Emacs\n(Share Extension)" as share2emacs
      participant "Persistence\n(UserDefaults)" as persistence
      participant "Captee\n(Host App)" as host
      participant "Settings" as settings
      participant "Documentation" as documentation
  end box

  participant macOS
  participant "Emacs" as emacs

  user -\ safari: tap Share icon

  create shareSheet
  safari -> shareSheet: new 
  user -\ shareSheet: tap "Captee - Share to Emacs"
  shareSheet -> safari: share to emacs
  safari -> share2emacs: init ShareViewController\n(URL?, title?, attributedContentText?)

  safari -> shareSheet !! : delete


  create shareVC
  share2emacs -> shareVC: new

  shareVC -> persistence: read template value
  shareVC <-- persistence: template value

  user --\ shareVC: optionally edit URL, title, attributedContentText


  user -\ shareVC: tap "Send" button

  shareVC -\ share2emacs: send
  share2emacs -\ macOS: open org-protocol://<command>
  share2emacs -\ shareVC !! : delete
  macOS -\ emacs: org-protocol://<command>

  #+END_SRC

  #+RESULTS:
  [[file:images/captee-architecture.svg]]


*** TODO Refactor Org Protocol Processing Logic
- Support access from either host or sharing extension
  - Implement as XPC?

*** TODO Support attributed string to Org mode export

*** TODO Test what happens when called with no Emacs  daemon.

*** TODO Support persisting template field

*** TODO Support Tab focus
https://stackoverflow.com/questions/36000867/select-next-nstextfield-with-tab-key-in-swift

*** TODO Write Tests

*** TODO Design Host App UI

*** TODO Design Sharing Extension UI

*** TODO Make icons

*** TODO Write Source Documentation

*** TODO Support in-app documentation

*** TODO Setup TestFlight distribution

*** TODO Upload Repository

*** TODO Build home page

*** TODO Support agvtool

*** DONE Write Source Comment Header
CLOSED: [2023-02-16 Thu 16:45]

#+begin_src swift
  //
  // Copyright Â© 2023 Yummy Melon Software - Charles Choi
  //
  // Licensed under the Apache License, Version 2.0 (the "License");
  // you may not use this file except in compliance with the License.
  // You may obtain a copy of the License at
  //
  //     http://www.apache.org/licenses/LICENSE-2.0
  //
  // Unless required by applicable law or agreed to in writing, software
  // distributed under the License is distributed on an "AS IS" BASIS,
  // WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  // See the License for the specific language governing permissions and
  // limitations under the License.
  //
#+end_src

[[https://help.apple.com/xcode/mac/9.0/index.html?localePath=en.lproj#/dev7fe737ce0][Text macros reference - Xcode Help]]

Directory where I generated the stupid header.
[[file:~/org/Projects/code-header]]

*** DONE Decide on licensing
CLOSED: [2023-02-16 Thu 10:00]

[2023-02-16 Thu 10:00]
DECIDED: Going with Apache 2.0.

Yeah, I think Apache 2.0 is still the way to go.

*** References

(gui-selection-value) will give you the current copied clipboard value.

https://orgmode.org/manual/Protocols.html

https://developer.apple.com/library/archive/documentation/General/Conceptual/ExtensibilityPG/Share.html
https://developer.apple.com/documentation/safariservices/safari_app_extensions/passing_messages_between_safari_app_extensions_and_injected_scripts
https://stackoverflow.com/questions/26971240/how-do-i-run-a-terminal-command-in-a-swift-script-e-g-xcodebuild

https://github.com/sprig/org-capture-extension

https://orgmode.org/worg/org-contrib/org-protocol.html

https://blog.aaronbieber.com/2016/11/24/org-capture-from-anywhere-on-your-mac.html

https://bitbucket.org/mituharu/emacs-mac/src/master/

